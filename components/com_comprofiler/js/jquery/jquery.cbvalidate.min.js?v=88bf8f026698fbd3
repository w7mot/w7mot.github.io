(function(e){var t=[];var a={init:function(a){return this.each((function(){var i=this;var s=e(i).data("cbvalidate");if(s){return}s={};s.options=typeof a!="undefined"?a:{};s.defaults=e.fn.cbvalidate.defaults;s.settings=e.extend(true,{},s.defaults,s.options);s.element=e(i);if(s.settings.useData){e.each(e.fn.cbvalidate.dataMap,(function(e,t){const a=s.element.data(t);if(typeof a!="undefined"){s.settings[e]=a}}))}s.element.triggerHandler("cbvalidate.init.before",[s]);if(!s.settings.init){return}if(s.settings.messages){e.extend(e.validator.messages,s.settings.messages)}s.element.find(".cbPasswordUnmask").each((function(){var t=e(this).find("input");var a=e(this).find(".cbPasswordUnmaskShow");var i=e(this).find(".cbPasswordUnmaskHide");a.on("click",(function(){t.attr("type","text");a.addClass("hidden");i.removeClass("hidden");t.focus()}));i.on("click",(function(){t.attr("type","password");a.removeClass("hidden");i.addClass("hidden");t.focus()}));t.data("passwordunmask",true)}));s.element.on("submit",(function(t){var a=e(this).find('button[type="submit"][data-submit-text],input[type="submit"][data-submit-text]');a.each((function(){var t=e(this).data("submit-text");var a=null;e(this).prop("disabled",true);if(e(this).is("input")){a=e(this).val();e(this).val(t)}else{a=e(this).html();e(this).html(t)}e(this).data("button-text",a)}));e(this).find(".cbPasswordUnmask").each((function(){if(e(this).find('input[type="password"]').length){return}e(this).find("input").attr("type","password");e(this).find(".cbPasswordUnmaskShow").removeClass("hidden");e(this).find(".cbPasswordUnmaskHide").addClass("hidden")}));var i=e(this).validate();i.cbIsFormSubmitting=true;var n=i.form();i.cbIsFormSubmitting=false;if(!n){a.each((function(){var t=e(this).data("button-text");e(this).prop("disabled",false);if(e(this).is("input")){e(this).val(t)}else{e(this).html(t)}e(this).removeData("button-text")}));var r=s.validate.errorList;if(r.length){var l=e(r[0].element);var o=l.closest(".cbTabPane");if(o.length){var d=o.closest(".cbTabs");if(d.length){var c=d.data("cbtabs");if(c){c.element.cbtabs("select",o.attr("id"))}}}e.scrollTo(l,0,{axis:"y",offset:{top:-((e(window).outerHeight()-l.outerHeight())/2),left:0}})}s.element.find(".cbValidationHasImageData").prop("disabled",false);i.focusInvalid();t.preventDefault()}else{s.element.find(".cbValidationHasImageData").prop("disabled",true)}s.element.triggerHandler("cbvalidate.validate",[s,n])}));s.validate=s.element.validate({onsubmit:false,ignoreTitle:true,errorClass:"cbValidationMessage",validClass:"cbValidationMessage",ignore:'.cbValidationDisabled,.hidden,.disabled,.ignore,:disabled,[readonly],[type="hidden"]:not(.cbValidationAllowed)',cbIsFormSubmitting:false,cbIsOnFocusIn:false,cbIsOnFocusOut:false,cbIsOnKeyUp:false,cbIsOnClick:false,cbIsOnChange:false,success:function(t,a){var i=s.validate.errorsFor(a);if(i.length>1){i.not(t).remove()}var n=e(a).data("remote-response");if(!n){n=e(a).data("msg-success")}if(n){t.find(".cbValidationIcon").remove();t.removeClass("invalid-feedback");t.html(n);if(n.toString().charAt(0)!="<"){t.prepend('<span class="cbValidationIcon fa fa-check mr-1"></span>');t.addClass("valid-feedback")}}else{t.remove()}s.element.triggerHandler("cbvalidate.success",[s,t,a])},showErrors:function(t,a){var i=this;i.defaultShowErrors();e.each(a,(function(t,a){if(e(a.element).hasClass("cbValidationHasImageData")){var s=e(a.element).siblings(".cbValidationImageData,.cbValidationImageDataCrop");if(s.length){s.remove()}e(a.element).removeClass("cbValidationHasImageData")}var n=i.errorsFor(a.element);if(n.length>1){n.not(":last").remove()}n.find(".cbValidationIcon").remove();n.removeClass("valid-feedback");if(a.message.toString().charAt(0)!="<"){n.prepend('<span class="cbValidationIcon fa fa-times mr-1"></span>');n.addClass("invalid-feedback")}}));s.element.triggerHandler("cbvalidate.showerrors",[s,t,a])},highlight:function(t,a,i){if(e(t).is(":checkbox")||e(t).is(":radio")){e(t).closest(".cb_form_line,tr").find(":checkbox,:radio").addClass("cbValidationError is-invalid")}else{e(t).addClass("cbValidationError is-invalid");if(e(t).hasClass("cbDatePicker")){e(t).siblings(".cbDatePickerSelector").addClass("cbValidationError is-invalid");e(t).siblings(".combodate").find("select").addClass("cbValidationError is-invalid")}}e(t).closest(".cb_form_line,tr").find(".col-form-label").addClass("cbValidationError text-danger");e(t).closest(".cb_form_line").addClass("cbValidationError");e(t).closest("tr").addClass("cbValidationError");var n=s.element.find(".cbTabs");if(n.length){n.each((function(){var t=e(this).data("cbtabs");if(t){e.each(t.tabs,(function(e,a){var i=a.tabPane.find("input.cbValidationError,select.cbValidationError,textarea.cbValidationError").not(":submit,:reset,:image,[disabled],[readonly]").not(s.validate.settings.ignore);if(i.length){a.tabNav.addClass("cbValidationError");if(t.tabsNav.hasClass("nav-pills")){a.tabNavLink.addClass("text-white bg-danger")}else{a.tabNavLink.addClass("text-danger border-danger")}}}))}}))}s.element.triggerHandler("cbvalidate.highlight",[s,t,a,i])},unhighlight:function(t,a,i){if(e(t).is(":checkbox")||e(t).is(":radio")){e(t).closest(".cb_form_line,tr").find(":checkbox,:radio").removeClass("cbValidationError is-invalid")}else{e(t).removeClass("cbValidationError is-invalid");if(e(t).hasClass("cbDatePicker")){e(t).siblings(".cbDatePickerSelector").removeClass("cbValidationError is-invalid");e(t).siblings(".combodate").find("select").removeClass("cbValidationError is-invalid")}}e(t).closest(".cb_form_line,tr").find(".col-form-label").removeClass("cbValidationError text-danger");e(t).closest(".cb_form_line").removeClass("cbValidationError");e(t).closest("tr").removeClass("cbValidationError");var n=s.element.find(".cbTabs");if(n.length){n.each((function(){var t=e(this).data("cbtabs");if(t){e.each(t.tabs,(function(e,a){var i=a.tabPane.find("input.cbValidationError,select.cbValidationError,textarea.cbValidationError").not(":submit,:reset,:image,[disabled],[readonly]").not(s.validate.settings.ignore);if(!i.length){a.tabNav.removeClass("cbValidationError");if(t.tabsNav.hasClass("nav-pills")){a.tabNavLink.removeClass("text-white bg-danger")}else{a.tabNavLink.removeClass("text-danger border-danger")}}}))}}))}s.element.triggerHandler("cbvalidate.unhighlight",[s,t,a,i])},errorElement:"div",errorPlacement:function(t,a){if(e(a).is(":checkbox")||e(a).is(":radio")||e(a).parent().hasClass("input-group")){a.parent().siblings().last().after(t)}else{a.parent().append(t)}s.element.triggerHandler("cbvalidate.errorplacement",[s,t,a])},onfocusin:function(t){this.cbIsOnFocusIn=true;e.validator.defaults.onfocusin.call(this,t);this.cbIsOnFocusIn=false;s.element.triggerHandler("cbvalidate.focusin",[s,t])},onfocusout:function(t,a){if(e(t).data("passwordunmask")===true&&!e(t).is('input[type="password"]')&&!e(a.relatedTarget).is(".cbPasswordUnmaskShow")&&!e(a.relatedTarget).is(".cbPasswordUnmaskHide")){var i=e(t).closest(".cbPasswordUnmask");e(t).attr("type","password");i.find(".cbPasswordUnmaskShow").removeClass("hidden");i.find(".cbPasswordUnmaskHide").addClass("hidden")}this.cbIsOnFocusOut=true;if(!this.checkable(t)&&(t.name in this.submitted||this.optional(t)!==true)){this.element(t)}this.cbIsOnFocusOut=false;s.element.triggerHandler("cbvalidate.focusout",[s,t])},onkeyup:function(t,a){this.cbIsOnKeyUp=true;e.validator.defaults.onkeyup.call(this,t,a);this.cbIsOnKeyUp=false;s.element.triggerHandler("cbvalidate.keyup",[s,t,a])},onclick:function(t){this.cbIsOnClick=true;e.validator.defaults.onclick.call(this,t);this.cbIsOnClick=false;s.element.triggerHandler("cbvalidate.click",[s,t])},onchange:function(e){this.cbIsOnChange=true;if(e.name in this.submitted||this.optional(e)!==true){this.element(e)}this.cbIsOnChange=false;s.element.triggerHandler("cbvalidate.change",[s,e])}});s.element.on("change.validate","input,select,textarea",(function(t){var a=e.data(this.form,"validator");var i="on"+t.type.replace(/^validate/,"");var s=a.settings;if(s[i]&&!e(this).is(s.ignore)){s[i].call(a,this,t)}})).find("input,select,textarea").on("cloned.validate",(function(){if(e(this).is(s.validate.settings.ignore)){return}if(e(this).is(":checkbox")||e(this).is(":radio")){e(this).closest(".cb_form_line,tr").find(":checkbox,:radio").removeClass("cbValidationError is-invalid")}else{e(this).removeClass("cbValidationError is-invalid");if(e(this).hasClass("cbDatePicker")){e(this).siblings(".cbDatePickerSelector").removeClass("cbValidationError is-invalid");e(this).siblings(".combodate").find("select").removeClass("cbValidationError is-invalid")}}e(this).closest(".cb_form_line,tr").find(".col-form-label").removeClass("cbValidationError text-danger");e(this).closest(".cb_form_line").removeClass("cbValidationError");e(this).closest("tr").removeClass("cbValidationError");e(this).closest(".cb_form_line,tr").find(".cbValidationMessage").remove();e(this).removeData("previousValue");e(this).removeData("remote-response")}));s.element.find(".cbRepeat").on("cbrepeat.add",(function(e,t,a){s.element.cbvalidate("validate",a,true)}));s.validate.options=s.settings;s.element.on("remove.cbvalidate destroy.cbvalidate",(function(){s.element.cbvalidate("destroy")}));s.element.triggerHandler("cbvalidate.init.after",[s]);s.element.data("cbvalidate",s);t.push(s)}))},validate:function(t,a){var i=e(this).data("cbvalidate");if(!i){return true}if(typeof t=="undefined"){t=null}if(typeof a=="undefined"){a=false}i.validate.cbIsFormSubmitting=true;var s=true;if(t){if(a){var n=0;i.validate.elements().filter((function(){return e(this).closest(t).length||e(this).is(t)})).each((function(){if(!i.validate.element(this)){n++}}));s=!n}else{s=i.validate.element(t)}}else{s=i.validate.form()}i.validate.cbIsFormSubmitting=false;if(!s){i.validate.focusInvalid()}i.element.triggerHandler("cbvalidate.validate",[i,s,t]);return s},reset:function(){var t=e(this).data("cbvalidate");if(!t){return false}t.validate.resetForm();t.element.triggerHandler("cbvalidate.reset",[t]);return true},invalid:function(){var t=e(this).data("cbvalidate");if(!t){return 0}var a=t.validate.numberOfInvalids();t.element.triggerHandler("cbvalidate.invalid",[t,a]);return a},focus:function(){var t=e(this).data("cbvalidate");if(!t){return false}t.validate.focusInvalid();t.element.triggerHandler("cbvalidate.focus",[t]);return true},valid:function(){var t=e(this).data("cbvalidate");if(!t){return true}var a=t.validate.valid();t.element.triggerHandler("cbvalidate.valid",[t,a]);return a},elements:function(t){var a=e(this).data("cbvalidate");if(!a){return[]}if(typeof t=="undefined"){t=null}var i=[];if(t=="invalid"){i=a.validate.invalidElements()}else if(t=="valid"){i=a.validate.validElements()}else{i=a.validate.elements()}a.element.triggerHandler("cbvalidate.elements",[a,i]);return i},errors:function(){var t=e(this).data("cbvalidate");if(!t){return[]}var a=t.validate.errors();t.element.triggerHandler("cbvalidate.errors",[t,a]);return a},destroy:function(){var t=e(this).data("cbvalidate");if(!t){return this}t.element.off("destroy.cbvalidate");t.validate.destroy();return this},instances:function(){return t}};e.validator.addMethod("creditcard",(function(e,t){if(this.optional(t)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(e)){return false}var a=0,i=0,s=false,n,r;e=e.replace(/\D/g,"");if(e.length<13||e.length>19){return false}for(n=e.length-1;n>=0;n--){r=e.charAt(n);i=parseInt(r,10);if(s){if((i*=2)>9){i-=9}}a+=i;s=!s}return a%10===0}),"Please enter a valid credit card number.");e.validator.addMethod("maxage",(function(e,t,a){if(this.optional(t)){return true}var i=new Date;var s=new Date(e);var n=i.getFullYear()-s.getFullYear();if(n<a+1){return true}var r=i.getMonth()-s.getMonth();if(r<0||r===0&&i.getDate()<s.getDate()){n--}return n<=a}),e.validator.format("You must be no more than {0} years old."));e.validator.addMethod("minage",(function(e,t,a){if(this.optional(t)){return true}var i=new Date;var s=new Date(e);var n=i.getFullYear()-s.getFullYear();if(n>a+1){return true}var r=i.getMonth()-s.getMonth();if(r<0||r===0&&i.getDate()<s.getDate()){n--}return n>=a}),e.validator.format("You must be at least {0} years old."));e.validator.addMethod("rangeage",(function(e,t,a){if(this.optional(t)){return true}var i=new Date;var s=new Date(e);var n=i.getFullYear()-s.getFullYear();if(n>a[0]+1&&n<a[1]+1){return true}var r=i.getMonth()-s.getMonth();if(r<0||r===0&&i.getDate()<s.getDate()){n--}return n>=a[0]&&n<=a[1]}),e.validator.format("You must be at least {0} years old, but not older than {1}."));e.validator.addMethod("maxWords",(function(t,a,i){return this.optional(a)||e(t).text().match(/\b\w+\b/g).length<=i}),e.validator.format("Please enter {0} words or less."));e.validator.addMethod("minWords",(function(t,a,i){return this.optional(a)||e(t).text().match(/\b\w+\b/g).length>=i}),e.validator.format("Please enter at least {0} words."));e.validator.addMethod("rangeWords",(function(t,a,i){var s=e(t).text();var n=/\b\w+\b/g;return this.optional(a)||s.match(n).length>=i[0]&&s.match(n).length<=i[1]}),e.validator.format("Please enter between {0} and {1} words."));e.validator.addMethod("pattern",(function(e,t,a){if(this.optional(t)){return true}if(typeof a==="string"){a=decodeURIComponent(a);var i=a.substr(0,1);var s=a.lastIndexOf(i);var n=a.slice(1,s);var r=a.substr(s+1);a=new RegExp(n,r)}return a.test(e)}),"Invalid format.");e.validator.addMethod("isPattern",(function(e,t,a){if(this.optional(t)){return true}try{if(typeof e==="string"){var i=e.substr(0,1);var s=e.lastIndexOf(i);var n=e.slice(1,s);var r=e.substr(s+1);e=new RegExp(n,r)}e.test("")}catch(e){return false}return true}),"Invalid regular expression.");e.validator.addMethod("cburl",(function(e,t){return this.optional(t)||/^(?:(https?|ftp):\/\/)?(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}),"Please enter a valid URL.");e.validator.addMethod("cbusername",(function(e,t){return this.optional(t)||!/^\s+|[<>"'%;()&\\]|\.\.\/|\s+$/i.test(e)}),"Please enter a valid username with no space at beginning or end and must not contain the following characters: < > \\ \" ' % ; ( ) &");e.validator.addMethod("passwordstrength",(function(t,a){if(!t){e(a).data("msg-success","");return true}var i=[/.{8,}/,/[A-Z]+/,/[a-z]+/,/\d+/,/[\-\]\\`~!@#$%^&*()_=+[{}|;:'",<.>\/?]+/,/.{12,}/,/[A-Z]{2,}/,/[a-z]{2,}/,/\d{2,}/,/[\-\]\\`~!@#$%^&*()_=+[{}|;:'",<.>\/?]{2,}/];var s=0;e.each(i,(function(e,a){if(t.match(a)){s++}}));if(s>i.length){s=i.length}else if(s<0){s=0}var n=s*(100/i.length);var r="cbPasswordStrengthStrong bg-success";if(n<=30){r="cbPasswordStrengthVeryWeak bg-danger"}else if(n<=50){r="cbPasswordStrengthWeak bg-warning"}else if(n<=70){r="cbPasswordStrengthOk bg-info"}var l=e(a).outerWidth();if(e(a).is(":hidden")){var o=e(a).clone(false).attr({id:"",class:""}).css({position:"absolute",display:"block",width:"auto",visibility:"hidden",padding:e(a).css("padding"),border:e(a).css("border"),margin:e(a).css("margin"),fontFamily:e(a).css("font-family"),fontSize:e(a).css("font-size"),fontWeight:e(a).css("font-weight"),boxSizing:e(a).css("box-sizing")}).appendTo("body");l=o.outerWidth();o.remove()}e(a).data("msg-success",'<div class="cbPasswordStrength progress m-0 mt-2" style="width: '+l+'px;"><div class="cbPasswordStrengthBar progress-bar '+r+'" style="width: '+n+'%"></div></div>');return true}),"");e.validator.addMethod("resize",(function(t,a,s){if(this.optional(a)||this.cbIsFormSubmitting){return true}var n=e(a).siblings(".cbValidationImageData,.cbValidationImageDataCrop");if(!window.FileReader){if(n.length){n.remove()}e(a).removeClass("cbValidationHasImageData");return true}var r=this.previousValue(a);var l=this;if(r.old===t){return r.valid}r.old=t;if(n.length){n.remove()}e(a).removeClass("cbValidationHasImageData");var o=typeof s[0]!="undefined"?s[0]:0;var d=typeof s[1]!="undefined"?s[1]:0;if((o||d)&&e(a).attr("type")==="file"){if(a.files&&a.files.length){for(var c=0;c<a.files.length;c++){var f=a.files[c];if(!/image/.test(f.type)||!/\.(jpg|jpeg|png|webp|avif)$/i.test(f.name)){continue}i.call(a,l,f,r,s)}return"pending"}}return true}));e.validator.addMethod("accept",(function(t,a,i){var s=typeof i==="string"?i.replace(/\s/g,"").replace(/,/g,"|"):"image/*";var n=this.optional(a);if(n){return n}if(e(a).attr("type")==="file"){s=s.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*");if(e(a).hasClass("cbValidationHasImageData")){var r=e(a).siblings(".cbValidationImageData").val();var l=r.substring(r.indexOf(":")+1,r.indexOf(";"));if(l&&!l.match(new RegExp(".?("+s+")$","i"))){return false}}else{if(a.files&&a.files.length){for(var o=0;o<a.files.length;o++){var d=a.files[o];if(d.type&&!d.type.replace(/mp3/,"mpeg").replace(/m4a/,"mp4").match(new RegExp(".?("+s+")$","i"))){return false}}}}}return true}),e.validator.format("Please enter a value with a valid extension."));e.validator.addMethod("extension",(function(t,a,i){i=typeof i==="string"?i.replace(/,/g,"|"):"png|jpe?g|gif";if(e(a).hasClass("cbValidationHasImageData")){var s=e(a).siblings(".cbValidationImageData").val();var n=s.substring(s.indexOf(":")+1,s.indexOf(";"));if(n){return this.optional(a)||n.substring(n.indexOf("/")+1).match(new RegExp("^"+i+"$","i"))}}return this.optional(a)||t.match(new RegExp("\\.("+i+")$","i"))}),e.validator.format("Please enter a value with a valid extension."));e.validator.addMethod("filesize",(function(t,a,i){var s=this.optional(a);if(s){return s}var r=false;var l=false;if((i[0]||i[1])&&e(a).attr("type")==="file"){if(e(a).hasClass("cbValidationHasImageData")){var o=e(a).siblings(".cbValidationImageData").val();var d=o.length-(o.indexOf(",")+1);var c=o.charAt(o.length-2)==="="?2:o.charAt(o.length-1)==="="?1:0;var f=n(d*.75-c,i[2]);if(i[0]&&f<i[0]){r=true}if(i[1]&&f>i[1]){l=true}}else if(a.files&&a.files.length){for(var u=0;u<a.files.length;u++){var h=a.files[u];var m=n(h.size,i[2]);if(i[0]&&m<i[0]){r=true}if(i[1]&&m>i[1]){l=true}}}}if(r||l){if(!this.settings.messages[a.name]){this.settings.messages[a.name]={};this.settings.messages[a.name].min=this.defaultMessage(a,"filesizemin");this.settings.messages[a.name].max=this.defaultMessage(a,"filesizemax");this.settings.messages[a.name].both=this.defaultMessage(a,"filesize")}if(r&&!l){this.settings.messages[a.name].filesize=this.settings.messages[a.name].min}else if(l&&!r){this.settings.messages[a.name].filesize=this.settings.messages[a.name].max}else{this.settings.messages[a.name].filesize=this.settings.messages[a.name].both}return false}return true}),e.validator.format("File size must exceed the minimum of {0} {2}s, but not the maximum of {1} {2}s."));e.validator.addMethod("notEqualTo",(function(t,a,i){return this.optional(a)||!e.validator.methods.equalTo.call(this,t,a,i)}),"Please enter a different value, values must not be the same.");e.validator.addMethod("maxselect",(function(t,a,i){return e.validator.methods.maxlength.call(this,t,a,i)}),e.validator.format("Please select no more than {0} options."));e.validator.addMethod("minselect",(function(t,a,i){return e.validator.methods.minlength.call(this,t,a,i)}),e.validator.format("Please select at least {0} options."));e.validator.addMethod("requiredIf",(function(t,a,i){var s=e(i);if(this.settings.onfocusout){s.off(".validate-requiredIf").on("blur.validate-requiredIf",(function(){e(a).valid()}))}if(s[0].nodeName.toLowerCase()==="select"){var n=s.val();if(!(n&&n.length>0)){return true}}var r=this.elementValue(s[0]);if(this.checkable(s[0])){if(this.getLength(r,s[0])<=0){return true}}if(r.length<=0){return true}return e.validator.methods.required.call(this,t,a,null)}),"This field is required.");e.validator.addMethod("forbiddenWords",(function(t,a,i){if(this.optional(a)){return true}if(e.isArray(i)){var s=true;e.each(i,(function(e,a){if(a!==""&&t.indexOf(a)!=-1){s=false;return false}}));return s}else{if(i!==""&&t.indexOf(i)!=-1){return false}}return true}),"Invalid format.");e.validator.addMethod("cbfield",(function(t,a,i){var s=this.options;if(!i.method){i.method="cbfield"}if(!i["function"]){i["function"]="checkvalue"}if(this.checkable(a)){var n=[];this.findByName(a.name).filter(":checked").each((function(){n.push(e(this).val())}));if(a.name.indexOf("[]")!==-1){t=n}else{t=n.join("|*|")}}if(!i.data){i.data={}}i.data.user=i.user;i.data.field=i.field;i.data.reason=i.reason;i.data.value=t;if(s.settings.cbfield.url){i.url=s.settings.cbfield.url}return e.validator.methods.cbremote.call(this,t,a,i)}),"Please fix this field.");e.validator.addMethod("cbremote",(function(t,a,i){e(a).data("remote-response",null);if(this.optional(a)||!i.url||e(a).hasClass("cbValidationRemoteSkip")){return true}e(a).addClass("cbValidationRemoteSkip");if(!e(a).valid()){e(a).removeClass("cbValidationRemoteSkip");return true}else{e(a).removeClass("cbValidationRemoteSkip")}e.each(i,(function(e,t){if(typeof t!="object"&&typeof t!="array"&&e!="url"&&e!="data"){i.url=i.url.replace("["+e+"]",t)}}));var s=this.previousValue(a);var n=this;if(!this.settings.messages[a.name]){this.settings.messages[a.name]={}}if(!i.headers){i.headers={}}if(this.options.settings.cbremote.csrf){i.headers["X-CSRF-Token"]=this.options.settings.cbremote.csrf}if(!i.data){i.data={}}if(!i.method){i.method="cbremote"}s.originalMessage=this.settings.messages[a.name][i.method];this.settings.messages[a.name][i.method]=s.message;if(s.old===t){e(a).data("remote-response",e(s).data("remote-response"));return s.valid}else if(this.cbIsOnKeyUp||this.cbIsFormSubmitting){return true}s.old=t;e(s).data("remote-response",null);this.startRequest(a);e.ajax({url:i.url,type:"POST",mode:"abort",port:"validate"+a.name,dataType:"json",headers:i.headers,data:i.data,converters:{"text json":function(t){try{return e.parseJSON(t)}catch(e){return{valid:true,message:t}}}},beforeSend:function(){var t=e('<span class="cbFieldIcons cbValidateSpinner"><div class="cbSpinner spinner-border spinner-border-sm text-secondary"></div></span>');if(e(a).parent(".form-check").length){t.insertAfter(e(a).parent().siblings(".form-check").last())}else if(e(a).parent(".btn-group-list").length){t.insertAfter(e(a).parent())}else if(e(a).siblings(".cbFieldIcons").length){t.insertBefore(e(a).siblings(".cbFieldIcons"))}else{t.insertAfter(e(a))}}}).done((function(r){var l=r.valid===true||r.valid==="true";var o={};var d=null;var c=null;n.settings.messages[a.name][i.method]=s.originalMessage;if(l){e(a).data("remote-response",r.message);e(s).data("remote-response",r.message);c=n.formSubmitted;n.resetInternals();n.toHide=n.errorsFor(a);n.prepareElement(a);n.formSubmitted=c;n.successList.push(a);delete n.invalid[a.name];n.showErrors()}else{d=r.message||n.defaultMessage(a,i.method);o[a.name]=s.message=e.isFunction(d)?d(t):d;n.invalid[a.name]=true;n.showErrors(o)}s.valid=l;n.stopRequest(a,l)})).always((function(){if(e(a).parent(".form-check,.btn-group-list").length){e(a).parent().siblings(".cbValidateSpinner").remove()}else{e(a).siblings(".cbValidateSpinner").remove()}}));return"pending"}),"Please fix this field.");function i(e,t,a,i){var n=this;if(/\.(jpg|jpeg)$/i.test(t.name)){var r=new FileReader;r.mimeType=t.type;r.onload=function(r){var l=null;if(window.DataView&&!CSS.supports("image-orientation","from-image")){var o=new DataView(r.target.result);if(o.getUint16(0,false)==65496){var d=o.byteLength;var c=2;while(c<d){var f=o.getUint16(c,false);c+=2;if(f==65505){if(o.getUint32(c+=2,false)==1165519206){var u=o.getUint16(c+=6,false)==18761;c+=o.getUint32(c+4,u);var h=o.getUint16(c,u);c+=2;for(var m=0;m<h;m++){if(o.getUint16(c+m*12,u)==274){l=o.getUint16(c+m*12+8,u);break}}if(l){break}}else{break}}else if((f&65280)!=65280){break}else{c+=o.getUint16(c,false)}}}}t.orientation=l;s.call(n,e,t,a,i)};r.onerror=function(){e.stopRequest(n,true)};r.readAsArrayBuffer(t)}else{t.orientation=null;s.call(n,e,t,a,i)}}function s(t,a,i,s){const n=this;let r=typeof s[0]!="undefined"?parseInt(s[0]):0;let l=typeof s[1]!="undefined"?parseInt(s[1]):0;let o=typeof s[2]!="undefined"?parseInt(s[2]):1;let d=typeof s[3]!="undefined"?parseInt(s[3]):1;const c=e.validator.messages.cropwidth;const f=e.validator.messages.cropheight;const u=new FileReader;u.mimeType=a.type;if(a.type==="image/webp"||a.type==="image/avif"){d=true}u.onload=function(u){const h=new Image;h.mimeType=this.mimeType;h.onload=function(u){let m=h;const g=h.width;const v=h.height;let b=h.mimeType;let p=g;let F=v;if(a.orientation){const e=document.createElement("canvas");if(a.orientation>4&&a.orientation<9){p=v;r=typeof s[1]!="undefined"?s[1]:0;F=g;l=typeof s[0]!="undefined"?s[0]:0;e.width=v;e.height=g}else{e.width=g;e.height=v}const t=e.getContext("2d");t.mozImageSmoothingEnabled=false;t.webkitImageSmoothingEnabled=false;t.msImageSmoothingEnabled=false;t.imageSmoothingEnabled=false;t.imageSmoothingQuality="high";switch(a.orientation){case 2:t.transform(-1,0,0,1,g,0);break;case 3:t.transform(-1,0,0,-1,g,v);break;case 4:t.transform(1,0,0,-1,0,v);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,v,0);break;case 7:t.transform(0,-1,-1,0,v,g);break;case 8:t.transform(0,-1,1,0,0,g);break}t.drawImage(m,0,0);m=e}if(!r){r=p}if(!l){l=F}let w=0;let D=0;if(!o){p=r;F=l}else if(o===1){if(p>r){F=Math.floor(F*(r/p));p=r}if(F>l){p=Math.floor(p*(l/F));F=l}}else if(o===2||o===3){if(r>l||l===r&&F>p){F=Math.floor(F*(r/p));p=r;if(o===2){D=Math.floor(l/2-F/2)}}else if(l>r||l===r&&p>F){p=Math.floor(p*(l/F));F=l;if(o===2){w=Math.floor(r/2-p/2)}}else if(p===F){p=r;F=l}}let I="";if(F>p){I="portrait";if(F<=l){I="landscape"}}else if(p>F){I="landscape";if(p<=r){I="portrait"}}else{I="square"}if(!d&&g===p&&v===F&&o!==3){t.stopRequest(n,true)}else{const a=document.createElement("canvas");if(o===2){a.width=r;a.height=l;if(I==="square"){w=0;D=0}}else{a.width=p;a.height=F}const s=a.getContext("2d");s.mozImageSmoothingEnabled=false;s.webkitImageSmoothingEnabled=false;s.msImageSmoothingEnabled=false;s.imageSmoothingEnabled=false;s.imageSmoothingQuality="high";s.drawImage(m,w,D,p,F);if(b==="image/webp"||b==="image/avif"){b="image/png"}const d=e(n).attr("name");e(n).addClass("cbValidationHasImageData");e('<input type="hidden"'+(d.length?' name="'+d+'_image_data"':"")+' value="'+a.toDataURL(b)+'" class="cbValidationImageData" />').insertAfter(e(n));if(o===3&&I!=="square"){e(`\n\t\t\t\t\t\t\t<div class="cbValidationImageDataCrop">\n\t\t\t\t\t\t\t\t<div class="cbValidationImageDataCropMsg">${I==="landscape"?c:I==="portrait"?f:""}</div>\n\t\t\t\t\t\t\t\t<div class="cbValidationImageDataCropArea">\n\t\t\t\t\t\t\t\t\t<div class="cbValidationImageDataCropSelect"></div>\n\t\t\t\t\t\t\t\t\t<img src="${a.toDataURL(b)}" class="cbValidationImageDataCropImage" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`).insertAfter(e(n).siblings(".cbValidationImageData"));const t=function(t){let a=0;let i=0;if(t===true){if(I==="landscape"){a=r/2-p/2}else if(I==="portrait"){i=l/2-F/2}}else{const t=e(this).position();if(I==="landscape"){if(e(this).parent().width()){a=-(p/(e(this).parent().width()/t.left))}}else if(I==="portrait"){if(e(this).parent().height()){i=-(F/(e(this).parent().height()/t.top))}}}const s=document.createElement("canvas");s.width=r;s.height=l;const n=s.getContext("2d");n.mozImageSmoothingEnabled=false;n.webkitImageSmoothingEnabled=false;n.msImageSmoothingEnabled=false;n.imageSmoothingEnabled=false;n.imageSmoothingQuality="high";n.drawImage(m,a,i,p,F);if(t===true){e(this).siblings(".cbValidationImageData").val(s.toDataURL(b))}else{e(this).closest(".cbValidationImageDataCrop").siblings(".cbValidationImageData").val(s.toDataURL(b))}};t.call(n,true);e(n).siblings(".cbValidationImageDataCrop").find(".cbValidationImageDataCropImage").on("load",(function(){e(this).siblings(".cbValidationImageDataCropSelect").draggable({containment:"parent",scroll:false,axes:I==="landscape"?"x":I==="portrait"?"y":false,create:function(){if(I==="landscape"){e(this).css({height:"100%",width:r/p*100+"%"}).css("left",e(this).parent().width()/2-e(this).width()/2+"px")}else if(I==="portrait"){e(this).css({height:l/F*100+"%",width:"100%"}).css("top",e(this).parent().height()/2-e(this).height()/2+"px")}else{e(this).css({height:"100%",width:"100%"})}t.call(this)},stop:function(e,a){t.call(this)}})}))}i.valid=true;t.stopRequest(n,true)}};h.onerror=function(){t.stopRequest(n,true)};h.src=u.target.result};u.onerror=function(){t.stopRequest(n,true)};u.readAsDataURL(a)}function n(e,t){if(t=="TB"){e=e/1024/1024/1024/1024}else if(t=="GB"){e=e/1024/1024/1024}else if(t=="MB"){e=e/1024/1024}else if(t=="KB"){e=e/1024}return e}e.fn.cbvalidate=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return a.init.apply(this,arguments)}return this};e.fn.cbvalidate.dataMap={messages:"cbvalidate-messages",settings:"cbvalidate-settings"};e.fn.cbvalidate.defaults={init:true,useData:false,messages:null,settings:null}})(jQuery);